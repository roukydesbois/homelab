apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - firefly-config-sc.yaml
  - ../../base

patches:
  - patch: |-
      - op: add
        path: /spec/source/helm
        value:
          valuesObject:
            firefly-db:
              storage:
                class: firefly-config
                accessModes:
                  - ReadWriteOnce
    target:
      group: argoproj.io
      version: v1alpha1
      kind: Application
      name: firefly-iii-stack-helm-chart
      namespace: firefly
